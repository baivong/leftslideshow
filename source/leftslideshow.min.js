/*! leftslideshow v2.0 | Copyright 2013 baivong | http://zzbaivong.blogspot.com/ */
(function(a){function m(d,c,b){a(".b_timebar",d).animate({width:"100%"},c,"linear",function(){a(".b_timebar",d).css("width",0);g("last","first",d,b);m(d,c,b)})}function g(d,c,b,k){var f=a(".b_slides li.selected",b),e;e=f.is("':"+d+"-child'")?a(".b_slides li:"+c,b):"last"==d?f.next():f.prev();"fade"==k?(f.removeClass("selected"),e.addClass("selected"),l(b,e)):"slide"==k&&(c="100%",k="-100%","last"==d&&(c="-100%",k="100%"),f.removeClass("selected").addClass("change").stop().animate({left:c},400,function(){f.css({left:0}).removeClass("change")}),e.addClass("change").css("left",k).stop().animate({left:0},400,function(){e.css({left:0}).removeClass("change");e.addClass("selected");l(b,e)}))}function l(d,c){a(".b_paging .selected",d).removeClass("selected");a(".b_paging a",d).eq(c.index()).addClass("selected")}a.fn.leftslideshow=function(d){var c=a.extend({},{itemsSelector:".bv_img",effect:"slide",width:"640px",height:"480px",speed:3E3,autoPlay:!1,hideControl:!1,infoBtn:!0,infoShow:!1,infoContent:"",noCopy:!1,autoResize:!0,fullScreen:!0,scrollTo:!0,open:function(){},start:function(){},pause:function(){}},d);return this.each(function(){var b=a(this),d=a(c.itemsSelector,b),f=c.speed;500>f&&(f=500);if(1<d.length){c.open();var e=c.effect;a('<div class="b_SideImg" style="width:'+c.width+'"><div class="b_content" style="height:'+c.height+'"><div class="b_timebar"></div><ul class="b_slides"></ul><div class="b_prev"></div><div class="b_next"></div><div class="b_load"></div></div><div class="b_control"><div class="b_play"></div><div class="b_pause"></div><div class="b_paging"></div></div></div>').insertAfter(d.last());a(".b_slides",b).addClass(function(){if("fade"==e)return"faded";if("slide"==e)return"slided";console.error("Set effect, slide or fade.")});c.hideControl&&a(".b_control",b).addClass("hidden");c.infoBtn&&(a(".b_content",b).append('<div class="b_info"></div>'),a(".b_info",b).click(function(){a(".b_slides p",b).toggleClass("show_info")}));c.noCopy&&a(".b_content",b).append('<div class="b_copy"></div>');c.fullScreen&&(a(".b_content",b).append('<div class="b_fullscreen"></div>'),a(".b_fullscreen",b).toggle(function(){var c=a(".b_SideImg",b)[0];c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullScreen?c.webkitRequestFullScreen():(a(".b_SideImg",b).css({position:"fixed"}).width(a(window).width()-10),a(".b_content",b).height(a(window).height()-a(".b_control",b).height()-10))},function(){var c=a(window);document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():(a(".b_SideImg",b).removeAttr("style"),c.resize())}));var l=0;d.each(function(e){var f,h,g=this.tagName;"A"==g?(f=this.href,h=this.innerHTML):"IMG"==g?(f=this.src,h=this.alt):console.error("Does not support "+g+" tag.");h||(h="...");c.infoContent.length&&(h=c.infoContent);a(".b_paging",b).append('<a class="b_wait" href="#">'+(e+1)+"</a>");a(".b_slides",b).append('<li><img src="'+f+'" alt="Please wait..." /><p>'+h+"</p></li>");a(".b_slides img",b).eq(e).bind("load error",function(c){"error"==c.type&&(a(".b_slides p",b).eq(e).html("<strong style='color:red'>Image not found</strong><br />"+this.src),this.alt="Image not found",this.src="http://a.servimg.com/u/f75/17/70/81/78/galler10.png");c=l++;var f=d.length-1;a(".b_paging a",b).eq(e).removeClass("b_wait");a(".b_load",b).text(Math.floor(100*c/f)+"%");c==f&&a(".b_load",b).delay(100).fadeOut(500)})});c.infoShow&&a(".b_slides li p",b).addClass("show_info");if(c.autoResize){var n=a(".b_SideImg",b).width(),p=a(".b_content",b).height();a(window).resize(function(){a(".b_SideImg",b).css("position","fixed").width(function(){return b.width()<n+10?b.width()-10:n}).css("position","relative");a(".b_content",b).height(function(){var d=a(".b_control",b).height();c.hideControl&&(d=0);return a(window).height()<p+d+10?a(window).height()-d-10:p})});a(window).resize()}a(".b_next",b).click(function(){g("last","first",b,e)});a(".b_prev",b).click(function(){g("first","last",b,e)});a(".b_play",b).click(function(){c.start();a(".b_play",b).hide().next().show();m(b,f,e)});a(".b_pause, .b_prev, .b_next, .b_paging a",b).click(function(){a(".b_play",b).is(":hidden")&&(a(".b_play",b).show().next().hide(),a(".b_timebar",b).css("width",0).stop())});a(".b_pause",b).click(function(){c.pause()});a(".b_paging a",b).click(function(){a(".b_SideImg .selected",b).removeClass("selected");a(this).addClass("selected");a(".b_slides li",b).eq(a(this).index()).addClass("selected");return!1});a(".b_slides li:first, .b_paging a:first",b).addClass("selected");c.scrollTo&&a("body").scrollTop(a(".b_SideImg",b).offset().top);c.autoPlay&&a(".b_play",b).click();d.remove();a("br",b).remove()}})}})(jQuery);
